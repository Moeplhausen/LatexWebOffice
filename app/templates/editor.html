<!--
@author: Franziska Everinghoff, Timo Dümke, Martin Kolaczek
@creation: 20.11.2014 - sprint-nr: 2
@last-change: 15.01.2015 - sprint-nr: 4
-->

{% extends "_wrapper.html" %}

<!-- Header -->
{% block header %}
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="/static/css/dateien.css">
<script src="/static/js/doT.min.js"></script>
<script src="/static/jstree/jstree.min.js"></script>

<!-- Einbindung der Funktionalität vom ACE Editor -->
<script src="/static/js/ace/ace.js"></script>
<script src="/static/js/ace/ext-language_tools.js"></script>
<script src="/static/js/editor.js"></script>
<link href="/static/bootstrap/css/bootstrap.icon-large.min.css" rel="stylesheet">
<script src="/static/js/general.js"></script>
<script data-jsfiddle="common" src="/static/handsontable/dist/handsontable.js"></script>
<link data-jsfiddle="common" rel="stylesheet" media="screen" href="/static/handsontable/dist/handsontable.css">


<style type="text/css">
.symbolbar_bg{
background: #95a5a6;
padding: 0;
min-height: 50px;
}
.container-fluid{
height: 100%;
}
body,html{
color: grey;
height: 100%;
}


#editorsymbols button{
margin-left: 1px;
height: 50px;
width: 50px;
border: 0;
border-right: 3px solid white;
}
#toggle .navbar-toggle{
margin-bottom: 0;
}
.navbar-default #toggle .navbar-toggle {
margin-top: 5px;
margin-bottom: 5px;
border-color: white;
}
ul.nav li button{
background-color: Transparent;
}
.navbar-default #toggle .navbar-toggle:focus {
background-color: Transparent;
}
.navbar-default #toggle .navbar-toggle:hover{
background: #798d8f;
}	
.navbar-default #toggle .navbar-toggle .icon-bar {
background-color: white;
}
.navbar-default:hover #toggle .navbar-toggle:hover .icon-bar {
background-color: white;
}
.btn-group{
border: 0;
}
.ace_scrollbar-v{
overflow: hidden;
}
.ace_scroller{
right: 17px;
overflow-y: scroll;
}
</style>
{% endblock %}

<!-- Inhalt -->
{% block content %}
<div id="inhalt" style="min-height: 100%; height: 100%;">

	<div id="dialog_editor_verlassen" title="Editor verlassen"style="display: none;">
							<p>Wollen Sie den Editor wirklich verlassen?</p>
							<p onClick="history.back()"> Ja</p>
							<p onClick=" $( '#dialog_editor_verlassen' ).dialog('destroy')"> Nein</p>
						</div>
						
	<div id="dialog_grafik_einfuegen" title="Editor verlassen" style="width: 600px !important; min-height: 200px !important; max-height: 700px !important; height: 400px !important; display: none;">
							<p>Bitte wählen Sie eine Grafik aus</p>
								<p > {% verbatim %}
								<script id="template_filesitem-file" type="text/template">
									<span class="filesitem-name" title="{{= it.mimetype }}, erstellt {{= it.createTime }}">
										<span class="filesitem-nameWrapper">{{= it.name }}</span> <span class="filesitem-size">{{= it.size }} KB</span>
									</span>
									<span class="filesitem-editdate" title="Verändert {{= it.lastModifiedTime }}">{{= it.lastModifiedTime }}</span>
								</script>
								{% endverbatim %}

								{% verbatim %}
								<script id="template_filesitem-folder" type="text/template">
									<span class="filesitem-name" title="Verzeichnis">
										<span class="filesitem-nameWrapper">{{= it.name }}</span>
									</span>
								</script>
								{% endverbatim %}
								<div id="fileswrapper" class="fileswrapper"></div>
								</p>
							<p onClick="insertGraphics()"> Einfügen</p>
							<p onClick=" $( '#dialog_grafik_einfuegen' ).dialog('destroy')"> Abbrechen</p>
						</div>					
	
	<div id="dialog_tabelle_erstellen" title="Tabelle erstellen" style="display: none;">	
		          <div id="example">



        <script data-jsfiddle="example">
			var data = [
			[,,,],
			[,,,],
			];


          var container = document.getElementById('example');
          var hot = new Handsontable(container,
          {
            data: data,
            minSpareRows: 1,
            colHeaders: true,
			rowHeaders: true,
            contextMenu: true
          });
		  
		  ;

        </script>
      </div>
		<p onClick="table_readout_input();$( '#dialog_tabelle_erstellen' ).dialog('destroy');">Übernehmen</p>
		<p onClick=" $( '#dialog_tabelle_erstellen' ).dialog('destroy')"> Abbrechen</p>
	</div>
		<nav class="navbar navbar-default symbolbar_bg">
	      <div class="container-fluid">
		<div id="toggle" style="float: left;text-align: left;width: 100%;margin-left: 0;">
		  <button type="button" id="editormenu" style="float: left;" class="navbar-toggle collapsed beg" data-toggle="collapse" data-target="#editorsymbols" aria-expanded="false" aria-controls="editorsymbols">
		    Menü
			<span class="sr-only">Toggle navigation</span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		  </button>
		</div>

	
		<div id="editorsymbols" class="navbar-collapse collapse">
		  <div class="btn-group" role="group">
            <button id="backtoprojekt" type="button" class="btn btn-default" title="Zurück zur Dateiübersicht des Projekts" onClick="confirmExit()">
						<i class="fa fa-angle-left"></i> <!-- Zurück zur Dateiübersicht des Projekts --> 										
			</button>
            <button id="save" type="button" class="btn btn-default" title="Speichern">
				<i class="fa fa-floppy-o"></i> 
			</button>
            <button id="undo" type="button" class="btn btn-default" title="Zurück">
				<i class="fa fa-undo"></i> <!-- Zurück --> 
			</button>
			<button id="redo" type="button" class="btn btn-default" title="Vor">
					<i class="fa fa-repeat"></i> <!-- Vor -->
			</button>       
			<button id="cut" type="button" class="btn btn-default" title="Ausschneiden">
				<i class="fa fa-scissors"></i> <!-- Ausschneiden -->
			</button> 
			<button id="copy" type="button" class="btn btn-default" title="Kopieren">
				<i class="fa fa-files-o"></i> <!-- Kopieren -->
			</button>
			<button id="paste" type="button" class="btn btn-default" title="Einfügen">
				<i class="fa fa-clipboard"></i> <!-- Einfügen -->
			</button> 
			<button id="compile" type="button" class="btn btn-default" title="PDF-Export">
				<i class="fa fa-file-pdf-o"></i> <!-- PDF-Export -->
			</button> 
			<button id="insertImage" type="button" class="btn btn-default" title="Grafik einfügen" onClick="openInsertImageDialog()">
				<i class="fa fa-file-image-o"></i> <!-- Grafik einfügen -->
			</button> 
			<button id="createTable" type="button" class="btn btn-default" title="Erstelle eine Tabelle" onClick="createTable()">
				<i class="fa fa-table"></i>
			</button> 
			<button id="formula" type="button" class="btn btn-default" title="Formeln eingeben" onClick="createFormula()">
				<i class="fa fa-superscript"></i>
			</button> 
			<button id="codelines" type="button" class="btn btn-default" title="Programmzeilen eingeben" onClick="createCodelines()">
				<i class="fa fa-code"></i>
			</button> 
			<button id="quotes" type="button" class="btn btn-default" title="In Anführungszeichen setzen" onClick="createQuote()">
				<i class="fa fa-quote-left"></i>
			</button> 
			<button id="switchView" type="button" class="btn btn-default" title="PDF und TEX">
				<i class="fa fa-refresh"></i> <!-- parallele Anzeige von TEX und PDF-Ausgabe -->
			</button> 
			<button id="search" type="button" class="btn btn-default" title="Im Textfeld suchen" onClick="createSearch()">
				<i class="fa fa-search"></i>
			</button> 
			</div>
			</div>

		<!--<div id="editorsymbols" class="navbar-collapse collapse">!-->
		 <!-- <ul class="nav navbar-nav">
				<li>
					<button id="backtoprojekt" type="button" title="Zurück zur Dateiübersicht des Projekts" onClick="confirmExit()">						
					</button>
				</li>
				<li>
					<button id="save" type="button" title="Speichern">
						<i class="icon-large icon-signal"></i>
					</button>
				</li>
				<li>
					<button id="undo" type="button" title="Zurück">
						<i class="fa fa-undo"></i> <!-- Zurück 
					</button>
				</li>
				<li>
					<button id="redo" type="button" title="Vor">
						<i class="fa fa-repeat"></i> <!-- Vor 
					</button>
				</li>
				<li>
					<button id="cut" type="button" title="Ausschneiden">
						
					</button>
				</li>
				<li>
					<button id="copy" type="button" title="Kopieren">
						
					</button>
				</li>
				<li>
					<button id="paste" type="button" title="Einfügen">
						
					</button>
				</li>
				<li>
					<button id="compile" type="button" title="PDF Export">
						<i class="fa fa-file-pdf-o"></i> <!-- PDF-Export 
					</button>
				</li>
				<li>
					<button id="insertImage" type="button" title="Grafik einfügen">
						<i class="fa fa-file-image-o"></i> <!-- Grafik einfügen 
					</button>
				</li>
				<li>
					<button type="button" class="btn btn-default" aria-label="Left Align" >
						<span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>  Button für den Tabellenassistent 
					</button>
				</li>
				<li>
					<button id="switchView" type="button" title="PDF und TEX">
						<i class="fa fa-refresh"></i>  parallele Anzeige von TEX und PDF-Ausgabe 
					</button>
				</li>
		
		    
		  </ul>!-->
		 
		<!--</div>-<!--/.nav-collapse --> 
	      </div>
	    </nav>
						<!--
						   <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
 <div class="dropdown">
  <button id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Dropdown trigger
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    <li>Test</li>
	<li>Test2</li>
  </ul>
</div>-->
						
	<!--<table id="editor_table1" style="width: 100%">
		<!-- Menüleiste 1 mit Drop-Down-Menü: Bearbeiten, Vorlagen, Assistent, Bibliographie, Ansicht, 
		Optionen, Hilfe 
		<tr style="width: 100%">
			<td style="padding-bottom: 50px">
				<div id="menu">
					<ul>
						<li class="topmenu"><a href="">Bearbeiten</a></li>
						<li class="topmenu"><a href="">Vorlagen</a></li>
						<li class="topmenu"><a href="">Assistent</a></li>
						<li class="topmenu"><a href="">Bibliographie</a></li>
						<li class="topmenu"><a href="">Ansicht</a></li>
						<li class="topmenu"><a href="">Optionen</a></li>
						<li class="topmenu"><a href="">Hilfe</a></li>
					</ul>
				</div>
			</td>
		</tr> 
		-->
		<!-- Ende Menüleiste 1-->

		<!-- Menüleiste 2 mit Symbolen für Speichern, Zurück und Vor, Ausschneiden, Kopieren, 
		Einfügen, PDF Export, Grafik einfügen, Parallele Anzeige von TEX und PDF -->
		
		
		
		<!--
		<tr>
			<td>
				<div id="symbolleiste">
					<button id="backtoprojekt" type="button" title="Zurück zur Dateiübersicht des Projekts" onClick="confirmExit()">						
						<i class="fa fa-angle-left"></i> <!-- Zurück zur Dateiübersicht des Projekts 											
					</button>
					<button id="save" type="button" title="Speichern">
						<i class="fa fa-floppy-o"></i> 
					</button>
					<button id="undo" type="button" title="Zurück">
						<i class="fa fa-undo"></i> <!-- Zurück 
					</button>
					<button id="redo" type="button" title="Vor">
						<i class="fa fa-repeat"></i> <!-- Vor 
					</button>
					<button id="cut" type="button" title="Ausschneiden">
						<i class="fa fa-scissors"></i> <!-- Ausschneiden 
					</button>
					<button id="copy" type="button" title="Kopieren">
						<i class="fa fa-files-o"></i> <!-- Kopieren 
					</button>
					<button id="paste" type="button" title="Einfügen">
						<i class="fa fa-clipboard"></i> <!-- Einfügen 
					</button>
					<button id="compile" type="button" title="PDF Export">
						<i class="fa fa-file-pdf-o"></i> <!-- PDF-Export 
					</button>
					<button id="insertImage" type="button" title="Grafik einfügen">
						<i class="fa fa-file-image-o"></i> <!-- Grafik einfügen 
					</button>
					<button id="switchView" type="button" title="PDF und TEX">
						<i class="fa fa-refresh"></i> <!-- parallele Anzeige von TEX und PDF-Ausgabe 
					</button>
				</div>
			</td>
		</tr>
		 Ende Menüleiste 2 mit Symbolen 
	</table>
	-->
<!-- verwendeter Editor: ACE Editor -->

<div style="min-height: 80%;height:auto !important;overflow: hidden;" id="editor"></div>
</div>

{% endblock %}