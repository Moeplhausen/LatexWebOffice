<!--
@author: Franziska Everinghoff
@creation: 20.11.2014 - sprint-nr: 2
@last-change: 20.11.2014 - sprint-nr: 2
-->

{% extends "_wrapper.html" %}

<!-- Header -->
{% block header %}
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src="/static/js/jquery.cookie.js"></script>
<script src="/static/js/editor.js"></script>
<script src="/static/js/ace/ace.js" type="text/javascript" charset="utf-8"></script>

{% endblock %}

<!-- Inhalt -->
{% block content %}
<!-- TODO: Prüfung der Authentifizierung -->
<div id="inhalt">



	
	<table id="editor_table1" style="width: 100%">
		<tr style="width: 100%">
		
		<td style="padding-bottom: 50px">
		
		  <div id="menu">
    <ul>
      <li class="topmenu">
        <a href="">Datei</a>
        <ul>
          <li class="submenu"><a href="">Öffnen</a></li>
          <li class="submenu"><a href="">Projekt-<br>verwaltung</a></li>
        </ul>
      </li>
      <li class="topmenu">
        <a href="">Bearbeiten</a>

      </li>
      <li class="topmenu">
        <a href="">Vorlagen</a>

      </li>
	  <li class="topmenu">
        <a href="">Assistent</a>

      </li>
	  <li class="topmenu">
        <a href="">Bibliographie</a>

      </li>
	  <li class="topmenu">
        <a href="">Ansicht</a>

      </li>
	  <li class="topmenu">
        <a href="">Optionen</a>
	  </li>
	   <li class="topmenu">
        <a href="">Hilfe</a>
	  </li>
    </ul>
  </div

				
		
		</td>
		</tr>
		<tr>
		<td>
		<div id="symbolleiste" >

		<form action="button.htm">
		  <div>
			<button name="NewDocument" type="button">
			 <i class="fa fa-file-o"></i> <!-- Neues tex-Dokument -->       
			</button>
			<button name="OpenDocument" type="button">
			 <i class="fa fa-folder-open-o"></i> <!-- Öffnen eines bestehenden Dokuments -->      
			</button>
			<button name="OpenDocument" type="button">
			 <i class="fa fa-floppy-o"></i> <!-- Speichern des geöffneten Dokuments -->    
			</button>
			<button name="UnDo" type="button">
			<i class="fa fa-undo"></i> <!-- Zurück -->     
			</button>
			<button name="ReDo" type="button">
			<i class="fa fa-repeat"></i> <!-- Vor -->     
			</button>
			<button name="CutDocument" type="button">
			<i class="fa fa-scissors"></i> <!-- Ausschneiden -->     
			</button>
			<button name="CopyDocument" type="button">
			<i class="fa fa-files-o"></i> <!-- Kopieren -->     
			</button>
			<button name="PasteDocument" type="button">
			<i class="fa fa-clipboard"></i> <!-- Einfügen -->     
			</button>			
			<button name="OpenDocument" type="button">
			 <i class="fa fa-file-pdf-o"></i> <!-- pdf Export -->     
			</button>
			<button name="OpenDocument" type="button">
			 <i class="fa fa-file-image-o"></i> <!-- Graphik einfügen -->   
			</button>
			<button name="OpenDocument" type="button">
			<i class="fa fa-refresh"></i>  <!-- parallele Anzeige von tex Code und pdf Ausgabe --> 
			</button>
		  </div>
		</form>

	</div>
	</td>
	</tr>
</table>

<div >
	<table id="editor_table2">
		<tr valign="top">
			<td style="margin-right: 5px;" width="40px">
			<button name="Fettschrift" type="button">
			 <i class="fa fa-bold"></i> <!-- Fettschrift -->       
			</button> <br />
			<button name="Kursivschrift" type="button">
			<i class="fa fa-italic"></i> <!-- Kursivschrift -->      
			</button>	
			</td>
			<td>
				<div id="editor"></div>
				<script>
    var editor = ace.edit("editor");
					var textlength = editor.getValue().length;

	//  Clouds  Eclipse GIthub
    editor.setTheme("ace/theme/clouds");
    editor.getSession().setMode("ace/mode/latex");
	editor.setOptions({
    enableBasicAutocompletion: true
});
editor.on('change', function(e) {
    var sign = e.data.text;
	var position = editor.selection.getCursor();
	var token = editor.session.getTokenAt(position.row,position.column);
	if (token != null){
	 console.log(token.value);
	}
	if (sign == '{' && token.value.charAt(token.value.length-2) != '\\' && editor.getValue().length >= textlength){
	
	editor.moveCursorTo(position.row,position.column+1);
	editor.insert("\n\n}");
	
	//console.log(position);
	}
	textlength = editor.getValue().length;
});
</script>

			</td>
		</tr>
	</table>
</div>
{% endblock %}
